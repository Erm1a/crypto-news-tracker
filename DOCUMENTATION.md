# مستندات سامانه‌ی پیگیری اخبار ارز دیجیتال

## فهرست مطالب

1. [معرفی کلی](#معرفی-کلی)
2. [ساختار پروژه](#ساختار-پروژه)
3. [ویژگی‌ها](#ویژگی‌ها)
4. [جزئیات فنی](#جزئیات-فنی)
5. [نقاط پایانی API](#نقاط-پایانی-api)
6. [ساختار پایگاه داده](#ساختار-پایگاه-داده)
7. [راهنمای راه‌اندازی](#راهنمای-راه‌اندازی)
8. [ملاحظات امنیتی](#ملاحظات-امنیتی)
9. [بهینه‌سازی عملکرد](#بهینه‌سازی-عملکرد)

---

## معرفی کلی

این برنامه یک سامانه‌ی کامل برای ردیابی اخبار ارزهای دیجیتال است که اخبار را از منابع مختلف جمع‌آوری می‌کند، قیمت لحظه‌ای ارزهای دیجیتال را ثبت می‌کند و ارتباط میان مقالات و ارزهای دیجیتال نام‌برده‌شده را نگه‌داری می‌نماید.

---

## ساختار پروژه

```
Crypto News/
├── main.py              # فایل اصلی برنامه
├── requirements.txt     # وابستگی‌های پایتون
├── static/              # فایل‌های ایستا (CSS، JS، تصاویر)
├── templates/           # قالب‌های HTML
└── .env                 # متغیرهای محیطی
```

---

## ویژگی‌ها

1. **گردآوری اخبار از چند منبع**

   * CryptoCompare
   * CoinDesk
   * بروزرسانی لحظه‌ای اخبار

2. **پیگیری قیمت‌ها**

   * دریافت قیمت لحظه‌ای از CoinGecko API
   * کش‌کردن قیمت‌ها برای بهبود عملکرد
   * پشتیبانی از رمزارزهای مطرح (BTC، ETH، SOL)

3. **اتصال به پایگاه داده**

   * استفاده از PostgreSQL
   * ذخیره‌سازی و بازیابی بهینه‌ی داده‌ها
   * نگاشت ارتباط بین اخبار و رمزارزها

---

## جزئیات فنی

### اجزای اصلی

1. **کلاس CryptoNewsTracker**

   * مسئول دریافت و پردازش اخبار
   * مدیریت عملیات پایگاه داده
   * پیاده‌سازی سیستم پیگیری قیمت

2. **عملیات پایگاه داده**

   * مدیریت اتصال
   * ذخیره و واکشی داده‌ها
   * ساخت ایندکس برای بهینه‌سازی عملکرد

3. **یکپارچه‌سازی API**

   * اتصال به چند منبع خبری (CryptoCompare، CoinDesk)
   * دریافت قیمت از CoinGecko
   * مدیریت خطا و محدودیت نرخ درخواست‌ها

---

## نقاط پایانی API

### واسط وب

* `/` : صفحه‌ی اصلی
* `/post/<id>` : نمایش جزئیات هر خبر

### REST API

* `/api/news` : دریافت لیست اخبار با فیلترها
* `/api/coins` : نمایش لیست رمزارزهای دنبال‌شده
* `/api/prices` : دریافت قیمت لحظه‌ای رمزارزها

---

## ساختار پایگاه داده

1. **جدول crypto\_news**

   * نگه‌داری مقالات خبری
   * شامل عنوان، متن، لینک، منبع، و تاریخ انتشار

2. **جدول crypto\_prices**

   * ذخیره‌ی قیمت رمزارزها
   * شامل تاریخچه‌ی قیمت و داده‌های بازار

3. **جدول news\_coins**

   * نگاشت بین اخبار و رمزارزهای نام‌برده
   * مشخص‌کردن ارزهای اشاره‌شده در هر خبر

---

## راهنمای راه‌اندازی

1. **راه‌اندازی محیط توسعه**

   ```bash
   python -m venv .venv
   source .venv/bin/activate  # در ویندوز: .venv\Scripts\activate
   pip install -r requirements.txt
   ```

2. **راه‌اندازی پایگاه داده**

   * نصب PostgreSQL
   * ایجاد دیتابیسی با نام "Crypto\_News"
   * تنظیم مشخصات اتصال در فایل main.py در بخش `DB_CONFIG`

3. **کلیدهای API**

   * تنظیم متغیرهای محیطی برای:

     * `CRYPTOCOMPARE_API_KEY`
     * `COINDESK_API_KEY`

4. **اجرای برنامه**

   ```bash
   python main.py
   ```

---

## ملاحظات امنیتی

* نگه‌داری کلیدهای API در متغیرهای محیطی
* تنظیم ایمن اطلاعات اتصال به پایگاه داده
* اعتبارسنجی و پاک‌سازی ورودی‌ها
* اعمال محدودیت نرخ برای درخواست‌های API

---

## بهینه‌سازی عملکرد

* کش‌کردن قیمت‌ها در بازه‌های ۵ دقیقه‌ای
* ایجاد ایندکس روی جداول کلیدی
* جلوگیری از ثبت خبرهای تکراری
* اجرای کوئری‌های بهینه برای سرعت بالا